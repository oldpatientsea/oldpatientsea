<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: BBC BASIC (Z80) for the Agon Light</title>
    <link rel="canonical" href="https://oldpatientsea.github.io/agon-bbc-basic-manual/0.1/bbckey3.html">
    <meta name="generator" content="Antora 3.1.3">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://oldpatientsea.github.io">BBC BASIC (Z80) for the Agon Light</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="agon-bbc-basic-manual" data-version="0.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">BBC BASIC (Z80) for the Agon Light</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="bbc1.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="bbc2.html">General Information</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="bbc3.html">Assembler</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="bbckey0.html">Statements and Functions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="bbckey1.html">ABS-ENVELOPE</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="bbckey2.html">EOF#-LOMEM</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="bbckey3.html">MID$-PRINT</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="bbckey4.html">PRINT#-WIDTH</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="opsys0.html">Operating System Interface</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="opsys1.html">Resident Star Commands</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="bbcfile1.html">BBC BASIC (Z80) Disk Files</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="bbcfile2.html">Serial Files</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="bbcfile3.html">Random (Relative) Files</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="bbcfile4.html">Indexed Data Files</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="annexa.html">Table of ASCII Codes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="annexb.html">Mathematical Functions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="annexc.html">Error Messages and Codes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="annexd.html">Format of Program and Variables in Memory</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="copyright.html">Copyrights</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">BBC BASIC (Z80) for the Agon Light</span>
    <span class="version">0.1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="index.html">BBC BASIC (Z80) for the Agon Light</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">0.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="bbc1.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">BBC BASIC (Z80) for the Agon Light</a></li>
    <li><a href="bbckey3.html">MID$-PRINT</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/oldpatientsea/agon-bbc-basic-manual/edit/main/modules/ROOT/pages/bbckey3.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<div class="sect2">
<h3 id="_mid"><a class="anchor" href="#_mid"></a><span id="mid">MID$</span></h3>
<div class="paragraph">
<p>A string function which returns 'num' characters of the string starting from character 'start_posn'. If 'num' is not present or if there are insufficient characters in the string, then all the characters from 'start_posn' onwards are returned.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">C$=MID$(A$,start_posn,num)
C$=MID$(A$,Z)</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use this function to select any part of a string. For instance, if</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">name$="BBC BASIC (Z80)"</code></pre>
</div>
</div>
<div class="paragraph">
<p>then</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">part$=MID$(name$,4,5)</code></pre>
</div>
</div>
<div class="paragraph">
<p>would assign BASIC to 'part$'. If the last number is omitted or there are insufficient characters to the right of the specified position, MID$ returns with the right hand part of the string starting at the specified position. Thus,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">part$=MID$(name$,9)</code></pre>
</div>
</div>
<div class="paragraph">
<p>would assign <code>(Z80)</code> to 'part$'.</p>
</div>
<div class="paragraph">
<p>For example,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">10 name$="BBC BASIC (Z80)"
20 FOR i=1 TO LEN(name$)
30   PRINT MID$(name$,i,10)
40 NEXT</code></pre>
</div>
</div>
<div class="paragraph">
<p>would print</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">BBC BASIC(8
BCBASIC(86
CBASIC (Z80)
BASIC (Z80)
ASIC(Z80)
SIC(Z80)
IC(Z80)
C(Z80)
(Z80)
86)
6)
)</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_syntax"><a class="anchor" href="#_syntax"></a>Syntax</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&lt;s-var&gt;=MID$(&lt;str&gt;,&lt;numeric&gt;[,&lt;numeric&gt;])</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_associated_keywords"><a class="anchor" href="#_associated_keywords"></a>Associated Keywords</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">LEFT$, RIGHT$, LEN, INSTR</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mod"><a class="anchor" href="#_mod"></a><span id="mod">MOD</span></h3>
<div class="paragraph">
<p>A binary operation giving the signed remainder of the integer division.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">X=A MOD B</code></pre>
</div>
</div>
<div class="paragraph">
<p>MOD is defined such that,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">A MOD B = A - ( A DIV B ) * B.</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you are doing integer division (<a href="bbckey1.html#div">DIV</a>) of whole numbers it is often desirable to know the remainder. (A 'teach children to divide' program for instance.) For example, 23 divided by 3 is 7, remainder 2. Thus,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">10 PRINT 23 DIV 3
20 PRINT 23 MOD 3</code></pre>
</div>
</div>
<div class="paragraph">
<p>would print</p>
</div>
<div class="literalblock">
<div class="content">
<pre>[source,console]</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">7
2</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use real numbers in these calculations, but they are truncated to their integer part before BBC BASIC (Z80) calculates the result. Thus,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">10 PRINT 23.1 DIV 3.9
20 PRINT 23.1 MOD 3.9</code></pre>
</div>
</div>
<div class="paragraph">
<p>would give exactly the same results as the previous example.</p>
</div>
<div class="sect3">
<h4 id="_syntax_2"><a class="anchor" href="#_syntax_2"></a>Syntax</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&lt;n-var&gt;=&lt;numeric&gt; MOD &lt;numeric&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_associated_keywords_2"><a class="anchor" href="#_associated_keywords_2"></a>Associated Keywords</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">DIV</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mode_mo"><a class="anchor" href="#_mode_mo"></a><span id="mode">MODE</span>, MO.</h3>
<div class="paragraph">
<p>The MODE command sets the screen display mode. The screen is cleared and all the graphics and text parameters (colours, origin, etc) are reset to their default values.</p>
</div>
<div class="paragraph">
<p><strong><em>Not implemented in the generic CP/M version of BBC BASIC (Z80)</em></strong></p>
</div>
<div class="sect3">
<h4 id="_syntax_3"><a class="anchor" href="#_syntax_3"></a>Syntax</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">MODE &lt;numeric&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_associated_keywords_3"><a class="anchor" href="#_associated_keywords_3"></a>Associated Keywords</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">CLS, CLG</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_move"><a class="anchor" href="#_move"></a><span id="move">MOVE</span></h3>
<div class="paragraph">
<p>A statement which moves the graphics cursor to an absolute position without drawing a line.</p>
</div>
<div class="paragraph">
<p><strong><em>Not implemented in the generic CP/M version of BBC BASIC (Z80)</em></strong></p>
</div>
<div class="sect3">
<h4 id="_syntax_4"><a class="anchor" href="#_syntax_4"></a>Syntax</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">MOVE &lt;numeric&gt;,&lt;numeric&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_associated_keywords_4"><a class="anchor" href="#_associated_keywords_4"></a>Associated Keywords</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">DRAW, MODE, GCOL, PLOT</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_new"><a class="anchor" href="#_new"></a><span id="new">NEW</span></h3>
<div class="paragraph">
<p>A command which initialises the interpreter for a new program to be typed in. The old program may be recovered with the <a href="#old">OLD</a> command provided no new program lines have been typed in or deleted and no variables have been created.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">NEW</code></pre>
</div>
</div>
<div class="paragraph">
<p>This command effectively 'removes' a program from the computer&#8217;s memory. In reality, the program is still there, but BBC BASIC (Z80) has been told to forget about it.</p>
</div>
<div class="paragraph">
<p>If you have made a mistake, you can recover your old program by typing <a href="#old">OLD</a>. However, this won&#8217;t work if you have begun to enter a new program.</p>
</div>
<div class="sect3">
<h4 id="_syntax_5"><a class="anchor" href="#_syntax_5"></a>Syntax</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">NEW</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_associated_keywords_5"><a class="anchor" href="#_associated_keywords_5"></a>Associated Keywords</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">OLD</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_next_n"><a class="anchor" href="#_next_n"></a><span id="next">NEXT</span>, N.</h3>
<div class="paragraph">
<p>The statement delimiting <a href="bbckey2.html#for">FOR</a>&#8230;&#8203;NEXT loops. NEXT takes an optional control variable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">NEXT
NEXT J</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the control variable is present then FOR----NEXT loops may be 'popped' automatically in an attempt to match the correct <a href="bbckey2.html#for">FOR</a> statement (this should not be necessary). If a matching FOR statement cannot be found, a '<a href="annexc.html#cantmatchfor">Can&#8217;t match FOR</a>' error will be reported.</p>
</div>
<div class="paragraph">
<p>Leaving out the control variable will make the program run quicker, but this is not to be encouraged.</p>
</div>
<div class="paragraph">
<p>See the keyword <a href="bbckey2.html#for">FOR</a> for more details about the structure of FOR----NEXT loops.</p>
</div>
<div class="sect3">
<h4 id="_syntax_6"><a class="anchor" href="#_syntax_6"></a>Syntax</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">NEXT [&lt;n-var&gt;{,&lt;n-var&gt;}]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_associated_keywords_6"><a class="anchor" href="#_associated_keywords_6"></a>Associated Keywords</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">FOR, TO, STEP</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_not"><a class="anchor" href="#_not"></a><span id="not">NOT</span></h3>
<div class="paragraph">
<p>This is a high priority unary operator (the same priority as unary -). It causes a bit-by-bit binary inversion of the numeric to its right. The numeric may be a constant, a variable, or a mathematical or boolean expression. Expressions must be enclosed in brackets.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">A=NOT 3
flag=NOT flag
flag=NOT(A=B)</code></pre>
</div>
</div>
<div class="paragraph">
<p>NOT is most commonly used in an <a href="bbckey2.html#if">IF</a>----<a href="bbckey4.html#then">THEN</a>----<a href="bbckey1.html#else">ELSE</a> statement to reverse the effect of the test.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">IF NOT(rate&gt;5 AND TIME&lt;100) THEN ----.
IF NOT flag THEN ----.</code></pre>
</div>
</div>
<div class="paragraph">
<p>BBC BASIC (Z80) does not have true boolean variables; it makes do with numeric variables. This can lead to confusion because the testable condition in an IF----THEN----ELSE statement is evaluated mathematically and can result in something other than -1 (<a href="bbckey4.html#true">TRUE</a>) or 0 (<a href="bbckey2.html#false">FALSE</a>).</p>
</div>
<div class="paragraph">
<p>When the test in an IF----THEN----ELSE is evaluated, FALSE=0 and anything else is considered to be TRUE. If you wish to use NOT to reverse the action of an IF statement it is important to ensure that the testable condition does actually evaluate to -1 for TRUE.</p>
</div>
<div class="paragraph">
<p>If the testable condition evaluates to 1, for example, the result of the test would be considered to be TRUE and the THEN part of the IF----THEN----ELSE statement would be carried out. However, using NOT in front of the testable condition would not reverse the action. NOT 1 evaluates to -2, which would also be considered to be TRUE.</p>
</div>
<div class="sect3">
<h4 id="_syntax_7"><a class="anchor" href="#_syntax_7"></a>Syntax</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&lt;n-var&gt;=NOT&lt;numeric&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_associated_keywords_7"><a class="anchor" href="#_associated_keywords_7"></a>Associated Keywords</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">None</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_old"><a class="anchor" href="#_old"></a><span id="old">OLD</span></h3>
<div class="paragraph">
<p>A command which undoes the effect of <a href="#new">NEW</a> provided no lines have been typed in or deleted, and no variables have been created.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">OLD</code></pre>
</div>
</div>
<div class="paragraph">
<p>OLD works even if BBC BASIC (Z80) has been re-loaded and re-started from CP/M-80. However, it will only work if no other programs have been run and BBC BASIC (Z80) loads at the same address as before.</p>
</div>
<div class="sect3">
<h4 id="_syntax_8"><a class="anchor" href="#_syntax_8"></a>Syntax</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">OLD</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_associated_keywords_8"><a class="anchor" href="#_associated_keywords_8"></a>Associated Keywords</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">NEW</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_on"><a class="anchor" href="#_on"></a><span id="on">ON</span></h3>
<div class="paragraph">
<p>A statement controlling a multi-way switch. The line numbers in the list may be constants or calculated and the 'unwanted' ones are skipped without calculation. The ON statement is used in conjunction with four other key-words: <a href="bbckey2.html#goto">GOTO</a>, <a href="bbckey2.html#gosub">GOSUB</a>, <a href="bbckey4.html#proc">PROC</a> and <a href="#onerror">ERROR</a>. (ON ERROR is explained separately.)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">ON option GOTO 1000,2000,3000,4000
ON action GOSUB 100,3000,200,5000,30
ON choice PROC_add,PROC_find,PROC_delete</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ON statement alters the path through your program by transferring control to one of a selection of line numbers depending on the value of a variable. For example,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">200 ON number GOTO 1000,2000,500,100</code></pre>
</div>
</div>
<div class="paragraph">
<p>would send your program to line 1000 if 'number' was 1, to line 2000 if 'number' was 2, to line 500 if 'number' was 3 and to line 100 if 'number' was 4.</p>
</div>
<div class="paragraph">
<p>Exceptions may be trapped using the <a href="bbckey1.html#else">ELSE</a> statement delimiter.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">ON action GOTO 100,300,120 ELSE PRINT"Illegal"</code></pre>
</div>
</div>
<div class="paragraph">
<p>If there is no statement after the ELSE, the program will 'drop through' to the following line if an exception occurs. In the two following examples, the program would drop through to the error handling part of the program if 'choice' or 'B-46' was less than one or more than 3.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">ON choice PROC_add,PROC_find(a$),PROC_delete ELSE PRINT
"Illegal Choice - Try again"

ON B-46 GOSUB 100,200,(C/200) ELSE PRINT "ERROR"</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use ON&#8230;&#8203;GOTO, ON&#8230;&#8203;GOSUB, and ON&#8230;&#8203;PROC to execute the appropriate part of your program as the result of a menu selection. The following skeleton example offers a menu with three choices.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console"> 20 CLS
 30 PRINT "SELECT THE ACTION YOU WISH TO TAKE"
 40 PRINT "1 OPEN A NEW DATA FILE"
 50 PRINT "2 ADD DATA TO THE FILE"
 60 PRINT "3 CLOSE THE FILE AND END"''
 70 REPEAT
 80   INPUT TAB(10,20)"WHAT DO YOU WANT ? "choice
 90 UNTIL choice&gt;0 AND choice&lt;4
100 ON choice PROC_open,PROC_add,PROC_close ELSE
110 ... etc</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_limitations"><a class="anchor" href="#_limitations"></a><span id="limitations">Limitations</span></h4>
<div class="paragraph">
<p>If a statement terminator (: or the token for ELSE) appears within the line, the interpreter assumes that the ON&#8230;&#8203; statement is terminated. For example, you cannot pass a colon as a literal string parameter in an ON&#8230;&#8203;PROC command. The program line</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">ON entry PROC_start,PROC_add(":"),PROC_end</code></pre>
</div>
</div>
<div class="paragraph">
<p>would be interpreted as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">ON entry PROC_start,PROC_add("
:"),PROC_end</code></pre>
</div>
</div>
<div class="paragraph">
<p>and give rise to an interesting crop of error messages.</p>
</div>
</div>
<div class="sect3">
<h4 id="_syntax_9"><a class="anchor" href="#_syntax_9"></a>Syntax</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">ON &lt;numeric&gt; GOTO &lt;l-num&gt;{,&lt;l-num&gt;}
             [ELSE &lt;stmt&gt;{:&lt;stmt&gt;}]
ON &lt;numeric&gt; GOSUB &lt;l-num&gt;{,&lt;l-num&gt;}
             [ELSE &lt;stmt&gt;{:&lt;stmt&gt;}]
ON &lt;numeric&gt; PROC&lt;name&gt;[(&lt;exp&gt;{,&lt;exp&gt;})]
             {,PROC&lt;name&gt;[(&lt;exp&gt;{,&lt;exp&gt;})]}
             [ELSE &lt;stmt&gt;{:&lt;stmt&gt;}]</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_associated_keywords_9"><a class="anchor" href="#_associated_keywords_9"></a>Associated Keywords</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">ON ERROR, ON ERROR LOCAL, GOTO, GOSUB, PROC</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_on_error"><a class="anchor" href="#_on_error"></a><span id="onerror">ON ERROR</span></h3>
<div class="paragraph">
<p>A statement controlling error trapping. If an ON ERROR statement has been encountered, BBC BASIC (Z80) will transfer control to it (without taking any reporting action) when an error is detected. This allows error reporting/recovery to be controlled by the program. However, the program control stack is still cleared when the error is detected and it is not possible to <a href="bbckey4.html#return">RETURN</a> to the point where the error occurred.</p>
</div>
<div class="paragraph">
<p>ON ERROR OFF returns the control of error handling to BBC BASIC (Z80).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">ON ERROR PRINT"Suicide":END
ON ERROR GOTO 100
ON ERROR OFF</code></pre>
</div>
</div>
<div class="paragraph">
<p>For example, the ON ERROR statement can be used to trap out the escape key to prevent a program being terminated at the wrong time by its accidental use.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">50 ON ERROR IF ERR=17 THEN 70
60 PRINT:REPORT:PRINT " at line ";ERL:END
70 : etc.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Error handling is explained more fully in the <a href="bbc2.html#errorhandling">General Information</a> section.</p>
</div>
<div class="sect3">
<h4 id="_syntax_10"><a class="anchor" href="#_syntax_10"></a>Syntax</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">ON ERROR &lt;stmt&gt;{:&lt;stmt&gt;}
ON ERROR OFF</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_associated_keywords_10"><a class="anchor" href="#_associated_keywords_10"></a>Associated Keywords</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">ON, GOTO, GOSUB, PROC</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_openin_op"><a class="anchor" href="#_openin_op"></a><span id="openin">OPENIN</span>, OP.</h3>
<div class="paragraph">
<p>A function which opens a file for reading and returns the file handle of the file. This number must be used in subsequent references to the file with <a href="bbckey1.html#bget">BGET#</a>, <a href="bbckey2.html#inputhash">INPUT#</a>, <a href="bbckey2.html#ext">EXT#</a>, <a href="bbckey4.html#ptr">PTR#</a>, <a href="bbckey2.html#eof">EOF#</a> or <a href="bbckey1.html#close">CLOSE#</a>.</p>
</div>
<div class="paragraph">
<p>A returned value of zero signifies that the specified file was not found on the disk.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">X=OPENIN "jim"
X=OPENIN A$
X=OPENIN (A$)
X=OPENIN ("FILE1")</code></pre>
</div>
</div>
<div class="paragraph">
<p>The example below reads data from disk into an array. If the data file does not exist, an error message is printed and the program ends.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">10 DIM posn(10),name$(10)
20 fnum=OPENIN "TOPTEN"
30 IF fnum=0 THEN PRINT "No TOPTEN data": END
40 FOR i=1 TO 10
50   INPUT#fnum,posn(i),name$(i)
60 NEXT
70 CLOSE#fnum</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_syntax_11"><a class="anchor" href="#_syntax_11"></a>Syntax</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&lt;n-var&gt;=OPENIN(&lt;str&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_associated_keywords_11"><a class="anchor" href="#_associated_keywords_11"></a>Associated Keywords</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">OPENOUT, OPENUP, CLOSE#, PTR#, PRINT#, INPUT#, BGET#, BPUT#,  EOF#</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_openout"><a class="anchor" href="#_openout"></a><span id="openout">OPENOUT</span></h3>
<div class="paragraph">
<p>A function which opens a file for writing and returns the file handle of the file. This number must be used in subsequent references to the file with <a href="bbckey1.html#bput">BPUT#</a>, <a href="bbckey4.html#print">PRINT#</a>, <a href="bbckey2.html#ext">EXT#</a>, <a href="bbckey4.html#ptr">PTR#</a> or <a href="bbckey1.html#close">CLOSE#</a>. If the specified file does not exist it is created. If the specified file already exists it is truncated to zero length.</p>
</div>
<div class="paragraph">
<p>A returned value of zero indicates that the specified file could not be created.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">X=OPENOUT(A$)
X=OPENOUT("DATAFILE")
X=OPENOUT("LPT1")</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also read from a file which has been opened using OPENOUT. This is of little use until you have written some data to it. However, once you have done so, you can move around the file using <a href="bbckey4.html#ptr">PTR#</a> and read back previously written data.</p>
</div>
<div class="paragraph">
<p>Data is not written to the file at the time it is opened. Consequently, it is possible to successfully open a file on a full disk. Under these circumstances, a '<a href="annexc.html#diskfull">Disk full</a>' error would be reported when you tried to write data to the file for the first time.</p>
</div>
<div class="paragraph">
<p>The example below writes the contents of two arrays (tables) to a file called 'TOPTEN.BBC'.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">10 A=OPENOUT "TOPTEN"
20 FOR Z=1 TO 10
30   PRINT#A,N(Z),N$(Z)
40 NEXT
50 CLOSE#A
60 END</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_syntax_12"><a class="anchor" href="#_syntax_12"></a>Syntax</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&lt;n-var&gt;=OPENOUT(&lt;str&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_associated_keywords_12"><a class="anchor" href="#_associated_keywords_12"></a>Associated Keywords</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">OPENIN, OPENUP, CLOSE#, PTR#, PRINT#, INPUT#, BGET#, BPUT#,  EOF#</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_openup"><a class="anchor" href="#_openup"></a><span id="openup">OPENUP</span></h3>
<div class="paragraph">
<p>A function which opens a disk data file for update (reading and writing) and returns the file handle of the file. This number must be used in subsequent references to the file with <a href="bbckey1.html#bget">BGET#</a>, <a href="bbckey1.html#bput">BPUT#</a>, <a href="bbckey2.html#inputhash">INPUT#</a>, <a href="bbckey4.html#print">PRINT#</a>, <a href="bbckey2.html#ext">EXT#</a>, <a href="bbckey4.html#ptr">PTR#</a>, <a href="bbckey2.html#eof">EOF#</a> or <a href="bbckey1.html#close">CLOSE#</a>.</p>
</div>
<div class="paragraph">
<p>A returned value of zero signifies that the specified file was not found on the disk.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">X=OPENUP "jim"
X=OPENUP A$
X=OPENUP (A$)
X=OPENUP ("FILE1")</code></pre>
</div>
</div>
<div class="paragraph">
<p>See the random file examples (F-RAND?) in the <a href="bbcfile3.html">BBC BASIC Disk Files</a> section for examples of the use of OPENUP.</p>
</div>
<div class="sect3">
<h4 id="_syntax_13"><a class="anchor" href="#_syntax_13"></a>Syntax</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&lt;n-var&gt;=OPENUP(&lt;str&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_associated_keywords_13"><a class="anchor" href="#_associated_keywords_13"></a>Associated Keywords</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">OPENIN, OPENOUT, CLOSE#, PTR#, PRINT#, INPUT#, BGET#, BPUT#, EOF#</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_opt"><a class="anchor" href="#_opt"></a><span id="opt">OPT</span></h3>
<div class="paragraph">
<p>An assembler pseudo operation controlling the method of assembly. (See the <a href="bbc3.html">Assembler</a> section for more details.) OPT is followed by an expression with the following meanings:</p>
</div>
<div class="sect3">
<h4 id="_code_assembled_starting_at_p"><a class="anchor" href="#_code_assembled_starting_at_p"></a><span id="codeatp">Code Assembled Starting at P%</span></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Value</th>
<th class="tableblock halign-left valign-top">Action</th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">assembler errors suppressed;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no listing.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">assembler errors suppressed;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">listing.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">assembler errors reported;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no listing.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">assembler errors reported;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">listing (default).</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_code_assembled_starting_at_o"><a class="anchor" href="#_code_assembled_starting_at_o"></a><span id="codeato">Code Assembled Starting at O%</span></h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Value</th>
<th class="tableblock halign-left valign-top">Action</th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">assembler errors suppressed;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no listing.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">assembler errors suppressed;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">listing.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">assembler errors reported;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no listing.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">7</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">assembler errors reported;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">listing.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The possible assembler errors are:</p>
</div>
<div class="paragraph">
<p><a href="annexc.html#outofrange">Out of range</a> - error code 40.<br>
<a href="annexc.html#nosuchvariable">No such variable</a> - error code 26.<br></p>
</div>
</div>
<div class="sect3">
<h4 id="_syntax_14"><a class="anchor" href="#_syntax_14"></a>Syntax</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">OPT &lt;numeric&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_associated_keywords_14"><a class="anchor" href="#_associated_keywords_14"></a>Associated Keywords</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">None</code></pre>
</div>
</div>
<hr>
</div>
</div>
<div class="sect2">
<h3 id="_or"><a class="anchor" href="#_or"></a><span id="or">OR</span></h3>
<div class="paragraph">
<p>The operation of bitwise integer logical OR between two items. The two operands are internally converted to 4 byte integers before the OR operation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">IF A=2 OR B=3 THEN 110
X=B OR 4</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can leave out the space between OR and a preceding constant, but it makes your programs difficult to read.</p>
</div>
<div class="paragraph">
<p>You can use OR as a logical operator or as a 'bit-by-bit' (bitwise) operator. The operands can be boolean (logical) or numeric.</p>
</div>
<div class="paragraph">
<p>Unfortunately, BBC BASIC does not have true boolean variables; it uses numeric variables and assigns the value 0 for <a href="bbckey2.html#false">FALSE</a> and -1 for <a href="bbckey4.html#true">TRUE</a>. This can lead to confusion at times. (See <a href="#not">NOT</a> for more details.)</p>
</div>
<div class="paragraph">
<p>In the example below, the operands are boolean (logical). In other words, the result of the tests (IF) A=2 and (IF) B=3 is either TRUE or FALSE. The result of this example will be TRUE if A=2 or B=3.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">answer=(A=2 OR B=3)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The brackets are not necessary, they have been included to make the example easier to follow.</p>
</div>
<div class="paragraph">
<p>The last example, uses the OR in a similar fashion to the numeric operators (+, -, etc).</p>
</div>
<div class="paragraph">
<p>Suppose X was -20 in the following example,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">A=X OR 11</code></pre>
</div>
</div>
<div class="paragraph">
<p>the OR operation would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">11111111 11111111 11111111 11101100
00000000 00000000 00000000 00001011
11111111 11111111 11111111 11101111  = -17</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_syntax_15"><a class="anchor" href="#_syntax_15"></a>Syntax</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&lt;n-var&gt;=&lt;numeric&gt; OR &lt;numeric&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_associated_keywords_15"><a class="anchor" href="#_associated_keywords_15"></a>Associated Keywords</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">AND, EOR, NOT</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_oscli"><a class="anchor" href="#_oscli"></a><span id="oscli">OSCLI</span></h3>
<div class="paragraph">
<p>This command allows a string expression to be passed to the operating system. It overcomes the problems caused by the exclusion of variables in the star (*) commands. Using this statement, you can, for instance, erase and rename files whose names you only know at run-time.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">command$="ERA PHONE.DTA"
OSCLI command$

command$="REN ADDRESS.DTA=NAME.DTA"
OSCLI command$</code></pre>
</div>
</div>
<div class="paragraph">
<p>See the <a href="opsys0.html">Operating System Interface</a> section for more details.</p>
</div>
<div class="sect3">
<h4 id="_syntax_16"><a class="anchor" href="#_syntax_16"></a>Syntax</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">OSCLI &lt;str&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_associated_keywords_16"><a class="anchor" href="#_associated_keywords_16"></a>Associated Keywords</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">All operating system (*) commands.</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_page_pa"><a class="anchor" href="#_page_pa"></a><span id="page">PAGE</span>, PA.</h3>
<div class="paragraph">
<p>A pseudo-variable controlling the starting address of the current user program area. It addresses the area where a program is (or will be) stored.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">PAGE=&amp;3100
PRINT ~PAGE
PAGE=TOP+&amp;100: REM Move to start of next page.</code></pre>
</div>
</div>
<div class="paragraph">
<p>PAGE is automatically initialised by BBC BASIC (Z80) to the address of the lowest available page in RAM, but you may change it.</p>
</div>
<div class="paragraph">
<p>If you make PAGE less than its original value or greater than the original value of <a href="bbckey2.html#himem">HIMEM</a>, you will get a '<a href="annexc.html#badprogram">Bad program</a>' error when you try to enter a program line and you may well crash BBC BASIC (Z80).</p>
</div>
<div class="paragraph">
<p>If you make PAGE greater than HIMEM, a '<a href="annexc.html#noroom">No room</a>' error will occur if the program exits to command level.</p>
</div>
<div class="paragraph">
<p>With care, several programs can be left around in RAM without the need for saving them.</p>
</div>
<div class="paragraph">
<p>USE WITH CARE.</p>
</div>
<div class="sect3">
<h4 id="_syntax_17"><a class="anchor" href="#_syntax_17"></a>Syntax</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">PAGE=&lt;numeric&gt;
&lt;n-var&gt;=PAGE</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_associated_keywords_17"><a class="anchor" href="#_associated_keywords_17"></a>Associated Keywords</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">TOP, LOMEM, HIMEM</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pi"><a class="anchor" href="#_pi"></a><span id="pi">PI</span></h3>
<div class="paragraph">
<p>A function returning 3.14159265.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">X=PI</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use PI to calculate the circumference and area of a circle. The example below calculates the circumference and area of a circle of a given radius.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">10 CLS
20 INPUT "What is the radius of the circle ",rad
30 PRINT "The circumference is: ";2*PI*rad
40 PRINT "The area is: ";PI*rad*rad
50 END</code></pre>
</div>
</div>
<div class="paragraph">
<p>PI can also be used to convert degrees to radians and radians to degrees.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">radians=PI/180*degrees
degrees=180/PI*radians</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, BBC BASIC (Z80) has two functions (<a href="bbckey4.html#rad">RAD</a> and <a href="bbckey1.html#deg">DEG</a>) which perform these conversions to a higher accuracy.</p>
</div>
<div class="sect3">
<h4 id="_syntax_18"><a class="anchor" href="#_syntax_18"></a>Syntax</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&lt;n-var&gt;=PI</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_associated_keywords_18"><a class="anchor" href="#_associated_keywords_18"></a>Associated Keywords</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">RAD, DEG</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_plot_pl"><a class="anchor" href="#_plot_pl"></a><span id="plot">PLOT</span>, PL.</h3>
<div class="paragraph">
<p>PLOT is a multi-purpose drawing statement. Three numbers follow the PLOT statement: the first specifies the type of point, line, triangle or circle to be drawn; the second and third give the X and Y coordinates to be used.</p>
</div>
<div class="paragraph">
<p><strong><em>Not implemented in the generic CP/M version of BBC BASIC (Z80)</em></strong></p>
</div>
<div class="sect3">
<h4 id="_syntax_19"><a class="anchor" href="#_syntax_19"></a>Syntax</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">PLOT &lt;numeric&gt;,&lt;numeric&gt;,&lt;numeric&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_associated_keywords_19"><a class="anchor" href="#_associated_keywords_19"></a>Associated Keywords</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">MODE, CLG, MOVE, DRAW, POINT, VDU, GCOL</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_point"><a class="anchor" href="#_point"></a><span id="point">POINT</span></h3>
<div class="paragraph">
<p>A function which returns a number giving the logical colour of the screen at the coordinates specified. If the point is outside the graphics window, then -1 is returned.</p>
</div>
<div class="paragraph">
<p><strong><em>Not implemented in the generic CP/M version of BBC BASIC (Z80)</em></strong></p>
</div>
<div class="sect3">
<h4 id="_syntax_20"><a class="anchor" href="#_syntax_20"></a>Syntax</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&lt;n-var&gt;=POINT(&lt;numeric&gt;,&lt;numeric&gt;)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_associated_keywords_20"><a class="anchor" href="#_associated_keywords_20"></a>Associated Keywords</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">PLOT, DRAW, MOVE, GCOL</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_pos"><a class="anchor" href="#_pos"></a><span id="pos">POS</span></h3>
<div class="paragraph">
<p>A function returning the horizontal position of the cursor on the screen. The left hand column is 0 and the right hand column is one less than the width of the display.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">X=POS</code></pre>
</div>
</div>
<div class="paragraph">
<p>COUNT will tell you the print head position of the printer. It is an uncertain indicator of the horizontal position of the cursor on the screen. (See the keyword <a href="bbckey1.html#count">COUNT</a> for details.)</p>
</div>
<div class="paragraph">
<p>See <a href="bbckey4.html#vpos">VPOS</a> for an example of the use of POS and VPOS.</p>
</div>
<div class="sect3">
<h4 id="_syntax_21"><a class="anchor" href="#_syntax_21"></a>Syntax</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&lt;n-var&gt;=POS</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_associated_keywords_21"><a class="anchor" href="#_associated_keywords_21"></a>Associated Keywords</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">COUNT, TAB, VPOS</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_print_p"><a class="anchor" href="#_print_p"></a><span id="print">PRINT</span>, P.</h3>
<div class="paragraph">
<p>A statement which prints characters on the VDU screen or printer (see <a href="opsys1.html#opt">*OPT</a>). The printer may be turned on and off manually by typing ^P. All the characters displayed on the VDU screen after the first ^P will be echoed to the printer. A second ^P will turn the printer off.</p>
</div>
<div class="sect3">
<h4 id="_general_information"><a class="anchor" href="#_general_information"></a><span id="printinfo">General Information</span></h4>
<div class="paragraph">
<p>The items following PRINT are called the print list. The print list may contain a sequence of string or numeric literals or variables. The spacing between the items printed will vary depending on the punctuation used. If the print list does not end with a semi-colon, a new-line will be printed after all the items in the print list.</p>
</div>
<div class="paragraph">
<p>In the examples which follow, commas have been printed instead of spaces to help you count.</p>
</div>
<div class="paragraph">
<p>The screen is divided into zones (initially) 10 characters wide. By default, numeric quantities are printed right justified in the print zone and strings are printed just as they are (with no leading spaces). Numeric quantities can be printed left justified by preceding them with a semi-colon. In the examples the zone width is indicated as z10, z4 etc.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">                    z10
                    012345678901234567890123456789
PRINT 23.162        ,,,,23.162
PRINT "HELLO"       HELLO
PRINT ;23.162       23.162</code></pre>
</div>
</div>
<div class="paragraph">
<p>Initially numeric items are printed in decimal. If a tilde (~) is encountered in the print list, the numeric items which follow it are printed in hexadecimal. If a comma or a semi-colon is encountered further down the print list, the format reverts to decimal.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">                   z10
                    012345678901234567890123456789
PRINT ~10 58,58     ,,,,,,,,,A,,,,,,,,3A,,,,,,,,58</code></pre>
</div>
</div>
<div class="paragraph">
<p>A comma (,) causes the cursor to TAB to the beginning of the next print zone unless the cursor is already at the start of a print zone. A semi-colon causes the next and following items to be printed on the same line immediately after the previous item. This 'no-gap' printing continues until a comma (or the end of the print list) is encountered. An apostrophe (') will force a new line. <a href="bbckey4.html#tab">TAB</a>(X) and <a href="bbckey4.html#tab">TAB</a>(Y,Z) can also be used at any position in the print line to position the cursor.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">                    z10
                    012345678901234567890123456789
PRINT "HELLO",24.2  HELLO     ,,,,,,24.2
PRINT "HELLO";24.2  HELLO24.2
PRINT ;2 5 4.3,2    254.3     ,,,,,,,,,2
PRINT "HELLO"'2.45  HELLO
                    ,,,,,,2.45</code></pre>
</div>
</div>
<div class="paragraph">
<p>Unlike most other versions of BASIC, a comma at the end of the print list will not suppress the new line and advance the cursor to the next zone. If you wish to split a line over two or more PRINT statements, end the previous print list with a semicolon and start the following list with a comma or end the line with a comma followed by a semicolon.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">                    z10
                    012345678901234567890123456789
PRINT "HELLO" 12;   HELLO,,,,,,,,12,,,,,,,,,,23.67
PRINT ,23.67</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">PRINT "HELLO" 12,;
PRINT 23.67</code></pre>
</div>
</div>
<div class="paragraph">
<p>Printing a string followed by a numeric effectively moves the start of the print zones towards the right by the length of the string. This displacement continues until a comma is encountered.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">                    z10
                    012345678901234567890123456789
PRINT "HELLO"12 34  HELLO,,,,,,,,12,,,,,,,,34
PRINT "HELLO"12,34  HELLO,,,,,,,,12     ,,,,,,,,34</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_print_format_control"><a class="anchor" href="#_print_format_control"></a><span id="printformat">Print Format Control</span></h4>
<div class="paragraph">
<p>Although PRINT USING is not implemented in BBC BASIC, similar control over the print format can be obtained. The overall width of the print zones and print field, the number of figures or decimal places and the print format may be controlled by setting the print variable, @%, to the appropriate value. The print variable (@%) comprises 4 bytes and each byte controls one aspect of the print format. @% can be set equal to a decimal integer, but it is easier to use hexadecimal, since each byte can then be considered separately.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">@%=&amp;SSNNPPWW</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Byte</th>
<th class="tableblock halign-left valign-top">Range</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00-01</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">STR$ Format Control</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00-02</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Format Selection</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">??-??</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">09</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of Digits Printed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WW</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">00-0F</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0A(10)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Zone and Print Field Width</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_str_format_control_ss"><a class="anchor" href="#_str_format_control_ss"></a><span id="strformat">STR$ Format Control - SS</span></h5>
<div class="paragraph">
<p>Byte 3 effects the format of the string generated by the <a href="bbckey4.html#str">STR$</a> function. If Byte 3 is 1 the string will be generated according to the format set by @%, otherwise the G9 format will be used.</p>
</div>
</div>
<div class="sect4">
<h5 id="_format_selection_nn"><a class="anchor" href="#_format_selection_nn"></a><span id="formatsel">Format Selection - NN</span></h5>
<div class="paragraph">
<p>Byte 2 selects the general format as follows:</p>
</div>
<div class="paragraph">
<p>00  General Format (G).<br>
01  Exponential Format (E).<br>
02  Fixed Format (F).</p>
</div>
<div class="paragraph">
<p>G Format</p>
</div>
<div class="paragraph">
<p>Numbers that are integers are printed as such. Numbers in the range 0.1 to 1 will be printed as such. Numbers less than 0.1 will be printed in E format. Numbers greater than the range set by Byte 1 will be printed in E format. In which case, the number of digits printed will still be controlled by Byte 1, but according to the E format rules.</p>
</div>
<div class="paragraph">
<p>The earlier examples were all printed in G9 format.</p>
</div>
<div class="paragraph">
<p>E Format</p>
</div>
<div class="paragraph">
<p>Numbers are printed in the scientific (engineering) notation.</p>
</div>
<div class="paragraph">
<p>F Format</p>
</div>
<div class="paragraph">
<p>Numbers are printed with a fixed number of decimal places.</p>
</div>
</div>
<div class="sect4">
<h5 id="_number_of_digits_pp"><a class="anchor" href="#_number_of_digits_pp"></a><span id="numdig">Number of Digits - PP</span></h5>
<div class="paragraph">
<p>Byte 1 controls the number of digits printed in the selected format. The number is rounded (NOT truncated) to this size before it is printed. If Byte 1 is set outside the range allowed for by the selected format, it is taken as 9. The effect of Byte 1 differs slightly with the various formats.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 34%;">
<col style="width: 33%;">
<col style="width: 33%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Format</th>
<th class="tableblock halign-center valign-top">Range</th>
<th class="tableblock halign-left valign-top">Control Function</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">G</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">01-0A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The maximum number of digits which can be printed, excluding the decimal point, before changing to the E format.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">                    01234567890123456789
&amp;030A - G3z10
(00'00'03'0A)
PRINT 1000.31       ,,,,,,,1E3
PRINT 1016.31       ,,,,1.02E3
PRINT 10.56         ,,,,,,10.6</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">E</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">01-FF</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The total number of digits to be printed excluding the decimal point and the digits after the E. Three characters or spaces are always printed after the E. If the number of significant figures called for is greater than 10, then trailing zeros will be printed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">01030A - E3z10
(00'01'03'0A)
                    01234567890123456789
PRINT 10.56         ,,1.06E1

&amp;010F0A - E15z10
(00'01'0F'0A)
                    01234567890123456789
PRINT 10.56         1.05600000000000E1</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">F</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">00-0A</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The number of digits to be printed after the decimal point.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">&amp;02020A - F2z10
(00'02'02'0A)
                    01234567890123456789
PRINT 10.56         ,,,,,10.56
PRINT 100.5864      ,,,,100.59
PRINT .64862        ,,,,,,0.65</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_zone_width_ww"><a class="anchor" href="#_zone_width_ww"></a><span id="zonewidth">Zone Width - WW</span></h5>
<div class="paragraph">
<p>Byte 0 sets the width of the print zones and field.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&amp;020208 - F2z8
(00'00'02'08)</code></pre>
</div>
</div>
<div class="paragraph">
<p>followed by</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">&amp;020206 - F2z6
(00'02'02'06)
                    01234567890123456789
PRINT 10.2,3.8      ,,,10.20,,,,3.80
PRINT 10.2,3.8      ,10.20,,3.80</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_changing_the_print_control_variable"><a class="anchor" href="#_changing_the_print_control_variable"></a><span id="changingat">Changing the Print Control Variable</span></h5>
<div class="paragraph">
<p>It is possible to change the print control variable (@%) within a print list by using the function:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">DEF FN_pformat(N):@%=N:=""</code></pre>
</div>
</div>
<div class="paragraph">
<p>Functions have to return an answer, but the value returned by this function is a null string. Consequently, its only effect is to change the print control variable. Thus the PRINT statement</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">PRINT FN_pformat(&amp;90A) x FN_pformat(&amp;2020A) y</code></pre>
</div>
</div>
<div class="paragraph">
<p>will print x in G9z10 format and y in F2z10 format.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_examples"><a class="anchor" href="#_examples"></a><span id="printeg">Examples</span></h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">G9z10                    G2z10
&amp;00090A                  &amp;00020A
012345678901234          012345678901234
1111.11111               ,,,,,1.1E3
13.7174211               ,,,,,,,,14
,1.5241579               ,,,,,,,1.5
1.88167642E-2            ,,,,1.9E-2
2.09975158E-3            ,,,,2.1E-3

F2z10                    E2z10
&amp;02020A                  &amp;0102A
012345678901234          012345678901234
,,,1111.11               ,,,1.1E3
,,,,,13.72               ,,,1.4E1
,,,,,,1.52               ,,,1.5E0
,,,,,,0.02               ,,,1.9E-2
,,,,,,0.00               ,,,2.1E-3</code></pre>
</div>
</div>
<div class="paragraph">
<p>The results obtained by running the following example program show the effect of changing the zone width. The results for zone widths of 5 and 10 (&amp;0A) illustrate what happens when the zone width is too small for the number to be printed properly. The example also illustrates what happens when the number is too large for the chosen precision.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">10 test=7.8123
 20 FOR i=5 TO 25 STEP 5
 30   PRINT
 40   @%=&amp;020200+i
 50   PRINT "@%=&amp;000";~@%
 60   PRINT STRING$(3,"0123456789")
 70   FOR j=1 TO 10
 80     PRINT test^j
 90   NEXT
100   PRINT '
110 NEXT
120 @%=&amp;90A

&amp;00020205
012345678901234567890123456789
 7.81
61.03
476.80
3724.91
29100.11
227338.75
1776038.54
13874945.89
1.083952398E8
8.46816132E8

&amp;0002020A
012345678901234567890123456789
      7.81
     61.03
    476.80
   3724.91
  29100.11
 227338.75
1776038.54
13874945.89
1.083952398E8
8.46816132E8

&amp;0002020F
012345678901234567890123456789
           7.81
          61.03
         476.80
        3724.91
       29100.11
      227338.75
     1776038.54
    13874945.89
   1.083952398E8
    8.46816132E8

&amp;00020214
012345678901234567890123456789
                7.81
               61.03
              476.80
             3724.91
            29100.11
           227338.75
          1776038.54
         13874945.89
       1.083952398E8
        8.46816132E8

&amp;00020219
012345678901234567890123456789
                     7.81
                    61.03
                   476.80
                  3724.91
                 29100.11
                227338.75
               1776038.54
              13874945.89
            1.083952398E8
             8.46816132E8</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_syntax_22"><a class="anchor" href="#_syntax_22"></a>Syntax</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">PRINT {[TAB(&lt;numeric&gt;[,&lt;numeric&gt;])][SPC(&lt;numeric&gt;]
      ['][,][;][~][&lt;str&gt;|&lt;numeric&gt;]}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_associated_keywords_22"><a class="anchor" href="#_associated_keywords_22"></a>Associated Keywords</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">PRINT#, TAB, POS, STR$, WIDTH, INPUT, VDU</code></pre>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
